(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0adf1419"],{"1d75":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"parent-style"},[n("h5",{staticClass:"h5-style"},[t._v("数据库备份")]),n("el-button",{staticStyle:{"margin-bottom":"20px",float:"right","margin-left":"20px"},attrs:{type:"primary"},on:{click:this.getDBlist}},[t._v("刷新")]),n("el-button",{staticStyle:{"margin-bottom":"20px",float:"right"},attrs:{type:"primary"},on:{click:t.addDB}},[t._v("添加数据库")]),n("el-table",{attrs:{data:t.dbList}},[n("el-table-column",{attrs:{label:"数据库名称","min-width":"100px",prop:"dbName"}},[n("template",{slot:"header"},[t._v("\n        数据库名称"),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"限定于字母、数字、下划线的组合，只能由字母开头；可用于指定数据库进行外部连接。",placement:"top-start"}},[n("i",{staticClass:"el-icon-question"})])],1)],2),n("el-table-column",{attrs:{label:"数据库字符集",prop:"dbEncoding"}}),n("el-table-column",{attrs:{label:"排序规则",prop:"dbCollate"}}),n("el-table-column",{attrs:{label:"字符分类",prop:"dbCtype"}}),n("el-table-column",{attrs:{label:"所有者",prop:"dbOwner"}}),n("el-table-column",{attrs:{label:"创建时间",prop:"createTimestamp","min-width":"55px"}}),n("el-table-column",{attrs:{label:"修改时间",prop:"updateTimestamp","min-width":"55px"}}),n("el-table-column",{attrs:{label:"数据库描述",prop:"remark"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-setting"},on:{click:function(n){return t.deletedb(e.row)}}},[t._v("删除")])]}}])})],1),t.showAddDB?n("add-db",{on:{closeList:t.closeList}}):t._e()],1)},r=[],o=(n("6b54"),n("2397"),n("96cf"),n("3b8d")),s=n("d225"),i=n("b0b4"),c=n("308d"),u=n("6bb5"),l=n("4e2b"),d=n("9ab4"),p=n("60a3"),v=n("852f"),f=n("4bb5"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"base-dialog",attrs:{title:"添加数据库",visible:!0,"before-close":t.onCancel,width:"480px"}},[t._v("\n        数据库名称："),n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入数据库名称"},model:{value:t.dbName,callback:function(e){t.dbName=e},expression:"dbName"}}),n("br"),n("br"),t._v("\n    数据库所有者："),n("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择数据库所有者"},model:{value:t.dbOwner,callback:function(e){t.dbOwner=e},expression:"dbOwner"}},t._l(t.dbOwnerList,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.onCancel}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.onSave}},[t._v("确 定")])],1)],1)},h=[];function m(t){return function(){var e,n=Object(u["a"])(t);if(b()){var a=Object(u["a"])(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(c["a"])(this,e)}}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var y=function(t){Object(l["a"])(n,t);var e=m(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.loadingForm=!1,t.instId=sessionStorage.getItem("instId")||"",t.dbName="",t.dbOwner="",t.dbOwnerList=[],t}return Object(i["a"])(n,[{key:"onCancel",value:function(){this.$emit("closeList")}},{key:"mounted",value:function(){this.getUserList()}},{key:"onSave",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={tenantId:this.data.paasConfig.userInfo.currentTenantId,instId:this.instId,dbName:this.dbName,dbOwner:this.dbOwner},t.prev=1,t.next=4,v["a"].addDataBase(e);case 4:n=t.sent,0===n.data.code?(this.$message.success("添加成功"),this.$emit("closeList")):(this.$message.warning("添加失败"),console.log(n.data.msg)),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0);case 11:return t.prev=11,t.finish(11);case 13:case"end":return t.stop()}}),t,this,[[1,8,11,13]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"getUserList",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={tenantId:this.data.paasConfig.userInfo.currentTenantId,instId:this.instId},t.next=4,v["a"].getUserInfo(e);case 4:if(n=t.sent,0===n.data.code){for(this.dbOwnerList=[],a=n.data.data.length,r=0;r<a;r++)this.dbOwnerList.push({value:n.data.data[r].userName,label:n.data.data[r].userName});console.log(dbOwnerList)}else console.log("数据获取失败");t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:return t.prev=10,t.finish(10);case 12:case"end":return t.stop()}}),t,this,[[0,8,10,12]])})));function e(){return t.apply(this,arguments)}return e}()}]),n}(p["c"]);Object(d["a"])([Object(f["a"])("data/getData")],y.prototype,"data",void 0),y=Object(d["a"])([p["a"]],y);var w=y,O=w,I=n("2877"),k=Object(I["a"])(O,g,h,!1,null,"7404d10e",null),_=k.exports;function L(t){return function(){var e,n=Object(u["a"])(t);if(x()){var a=Object(u["a"])(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(c["a"])(this,e)}}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var D=function(t){Object(l["a"])(n,t);var e=L(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.dbList=[],t.instId=sessionStorage.getItem("instId")||"",t.showAddDB=!1,t}return Object(i["a"])(n,[{key:"getDBlist",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={tenantId:this.data.paasConfig.userInfo.currentTenantId,instId:this.instId},t.next=4,v["a"].getDBlist(e);case 4:n=t.sent,0===n.data.code?this.dbList=n.data.data:console.log("数据获取失败"),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:return t.prev=10,t.finish(10);case 12:case"end":return t.stop()}}),t,this,[[0,8,10,12]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"deleteDBList",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n={tenantId:this.data.paasConfig.userInfo.currentTenantId,instId:this.instId,dbName:e.dbName,dbOwner:e.dbOwner},t.next=4,v["a"].deleteDBList(n);case 4:a=t.sent,0===a.data.code?(this.dbList=a.data.data,this.$message.success("删除成功")):(console.log("数据获取失败"),this.$message.error("删除失败")),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$message.error("删除失败");case 11:return t.prev=11,t.finish(11);case 13:case"end":return t.stop()}}),t,this,[[0,8,11,13]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deletedb",value:function(t){var e=this;this.$confirm("是否确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteDBList(t)})).catch((function(){}))}},{key:"mounted",value:function(){this.getDBlist()}},{key:"addDB",value:function(){this.showAddDB=!0}},{key:"closeList",value:function(){this.getDBlist(),this.showAddDB=!1}}]),n}(p["c"]);Object(d["a"])([Object(f["a"])("data/getData")],D.prototype,"data",void 0),D=Object(d["a"])([Object(p["a"])({components:{addDb:_}})],D);var j=D,B=j,S=(n("81ed"),Object(I["a"])(B,a,r,!1,null,"00bae6c2",null));e["default"]=S.exports},"4bb5":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n("65d9"),r=n("2f62"),o=(s("computed",r["mapState"]),s("computed",r["mapGetters"]));s("methods",r["mapActions"]),s("methods",r["mapMutations"]);function s(t,e){function n(n,r){return Object(a["createDecorator"])((function(a,o){a[t]||(a[t]={});var s,i=(s={},s[o]=n,s);a[t][o]=void 0!==r?e(r,i)[o]:e(i)[o]}))}function r(t,e){if("string"===typeof e){var a=e,r=t;return n(a,void 0)(r,a)}var o=i(e),s=t;return n(s,o)}return r}function i(t){var e=t&&t.namespace;if("string"===typeof e)return"/"!==e[e.length-1]?e+"/":e}},"81ed":function(t,e,n){"use strict";var a=n("a797"),r=n.n(a);r.a},"852f":function(t,e,n){"use strict";var a=n("c949"),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/inst/query_list",{params:t})},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/inst/query_detail",{params:t})},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/cluster_config/query",{params:t})},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/user/create",t)},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/inst/update_inst_name",t)},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/inst/restart",t)},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/inst/stop",t)},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/inst/start",t)},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/inst/delete",t)},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/inst/modify_inst_port",t)},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/user/reflash_user",{params:t})},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/params/query",{params:t})},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/instparam_config/commit",t)},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/user/update_password",t)},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/database/query_list",{params:t})},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/database/drop",t)},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/database/create",t)},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/user/delete",t)},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/node/query_list",{params:t})},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/gateway/query_list",{params:t})},_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/gateway/stop",{params:t})},L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/gateway/restart",{params:t})},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/node/restore",{params:t})},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/inst/upgradableVersion",t)},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/inst/upgrade",t)},B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/gateway/upgradableVersion",t)},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/gateway/upgrade",t)},R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/host/list",{params:t})},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/host/add",t)},q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/host/update",t)},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/host/delete",t)},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/host/check",t)},G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/inst/delete",t)},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/version/pg",{params:t})},T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/version/gateway",{params:t})},H=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/host/perf_list",{params:t})},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/inst/create",t)},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/inst/create_check",t)},V=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/detect/pg_nodes",{params:t})},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/detect/gateway_nodes",{params:t})},M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/detect/vip",{params:t})},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/detect/zookeeper",{params:t})},z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/inst/name_list",{params:t})},J=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/node/list",{params:t})},F=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/node/query_activity",{params:t})},K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/node/kill_activity",{params:t})},Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/user/reset_password",t)},Q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/monitor/query",t)},X=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/monitor/slowSql",t)},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/monitor/log",t)},tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/params/reset",t)},et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/params/history",{params:t})},nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].post("/params/alter",t)},at=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/sys/help/info",{params:t})};e["a"]={getUpgradeVersion:D,upgradeInst:j,getGatewayVersion:B,upgradeGateway:S,getInstanceList:r,getInstDetail:o,getPgParams:g,userSetting:i,getUserInfo:f,getClusterList:s,getMonitorData:Q,reloadInst:u,stopInst:l,updateListname:c,commitParams:h,updatePassWord:m,getDBlist:b,deleteDBList:y,addDataBase:w,deleteUser:O,delInst:p,loadInst:d,updatePort:v,getServiceList:I,getGatewayList:k,restartGateway:L,restartNode:x,stopGateway:_,getHostList:R,createHost:C,deleteHost:N,editHost:q,checkSet:P,deleteInst:G,getPGversion:$,getGWversion:T,getHostSet:H,createInst:U,testInst:A,detectPGnode:V,detectGWnode:E,detectVip:M,detectZKnode:W,getInstList:z,getNodeList:J,getSqlList:F,killConnect:K,updatePwd:Z,getSlowSql:X,getLogData:Y,pgParamsRet:tt,getHistoryList:et,commitModify:nt,getHelpData:at}},a797:function(t,e,n){},c949:function(t,e,n){"use strict";var a=n("6073"),r=n.n(a),o=r.a.http;e["a"]=o}}]);